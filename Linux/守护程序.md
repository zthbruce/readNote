# 守护程序（demaon)
> 守护程序是一种特殊的后台程序，会以进程的形式初始化
> 说起守护程序，必须先介绍一下前台程序和后台程序
## 前台程序
是独占命令行窗口的任务，只有运行完了或者手动中止该任务，才能执行其他命令
## 后台程序
> 后台程序在运行时，不需要用户的交互，用户可以继续实现其他命令，后台任务继承于当前session, 一旦用户退出当前session, 则后台程序关闭

> 开启后台任务的方式为 &
## 守护程序
>是指在UNIX或其他多任务操作系统中在后台执行的电脑程序，并不会接受电脑用户的直接操控。此类程序会被以进程的形式初始化。守护进程程序的名称通常以字母"d"结尾
> 用户退出session之后，后台任务是否会继续执行，是判定这一任务是否为守护进程的依据

> 为了理解守护任务为何在结束session时也不退出，需要先了解Linux下退出session时发生的操作。

Session退出时，linux系统设计如下：

1. 用户准备退出 session
2. 系统向该 session 发出SIGHUP信号
3. session 将SIGHUP信号发给所有子进程
4. 子进程收到SIGHUP信号后，自动退出
5. 前台任务会随着session的退出而退出是因为它收到了SIGHUP信号。
后台任务是否会受到SIGNUP信号，取决于shell的 huponexit 参数。可以通过 $ shopt | grep huponexit 查看该参数的值。大多数Linux系统，这个参数默认关闭（off）。因此，session退出的时候，不会把SIGHUP信号发给”后台任务”，即此时的后台任务是守护进程，但这显然不够安全。并不保险，因为有的系统的huponexit参数可能是打开的（on）状态。

> 一般开启守护程序的方式为
nohup node serve.js > nohup.log &

> nohuo具有的作用
阻止SIGHUP信号发到这个进程。
关闭标准输入。该进程不再能够接收任何输入，即使运行在前台。
重定向标准输出和标准错误到文件nohup.out。
