# 数据库优化
> 熟悉常用的数据库优化手段
## 学会EXPLAIN
> 遇到查询速度很慢的时候，使用EXPLAIN分析你的查询语句，可以告诉你索引键是否被利用，你的数据表时如何被搜索等信息
## 当只要一行数据时使用LIMIT1
> mysql在找到一条后会停止搜索，所以如果为了判断是否存在的问题时，直接采用LIMIT 1的方式会优化速度
## 索引优化
> 为需要搜索的字段加上索引(where，join，max, min等操作均需要搜索查找)
## Join优化
> 两边的key加上索引，并且保证join的key值类型必须相同
## 避免SELECT *
> 如果能确定需要哪些字段，就不适用 *
## 使用ENUM而不是VARCHAR
> ENUM类型是非常快和紧凑的，实际上，其保存的是TinyInt类型，只是外表上显示字符串型
> 将一些取值较小且有限的字段(性别，国家，民族)，使用Enum而不是VARCHAR
## 从PROCEDURE ANALYSE()获得建议
> PROCEDURE ANALYSE() 会让 MySQL 帮你去分析你的字段和其实际的数据，并会给你一些有用的建议。只有表中有实际的数据，这些建议才会变得有用，因为要做一些大的决定是需要有数据作为基础的。
## 尽可能使用NOT NULL
> NULl需要额外的空间，在进行比较的时候会更复杂
## 将IP地址存成UNSIGNED INT
> 很多程序员都会创建VARCHAR(15)字段来存放字符串形式的IP而不是整形的IP。如果使用整型，只需要四个字节
> 数据库中，表的字段是能小则小，INET_ATON() 可以将IP转化为INT型
## 能使用固定长度的字段就使用固定长度字段
> 固定长度的表会更快，因为这些固定的长度是很容易计算下一个数据的偏移量
> 缺点是可能会浪费存储空间
## 建表时遵循三大范式
> 采用垂直分割的方式，将存在依赖的字段分开
## 选择正确的存储引擎
> 对于定时更新，用于查询的表，MyISAM会比较适合
> 对于更新频繁的表，InnoDB会比较适合，其支持行锁，还支持事务操作
使用哪种存储引擎，可以参考以下这些问题：
1. 你的数据库有外键吗？
2. 你需要事务支持吗？
3. 你需要全文索引吗？
4. 你经常使用什么样的查询模式？COUNT等聚集查询使用MyISAM比较好
5. 你的数据有多大？大数据量采用INNODB,中小型的采用MyISAM

## 缓存查询
> 大多数的mysql服务器都会开启查询缓存。这可以有效提高查询速度，当很多相同的查询被执行了多次后，查询结果会被放到一个缓存中
> 但如果使用CurDate(),Rand(),Now()等函数不会缓存，所以能不适用就不适用这些函数(采用传入参数的方式更佳)